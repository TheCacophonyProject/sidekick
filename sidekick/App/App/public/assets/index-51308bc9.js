import{z as _,a as C,b as S,i as a,c as s,B as y,A as m,k as w,j as h,h as x,t as r,g as R,C as u,D as N}from"./index-f88eeaa7.js";import{I as U}from"./index-cb72b98b.js";import{A as $}from"./ActionContainer-3cd0ceda.js";import{C as A}from"./CircleButton-5d610d1b.js";import{D as E}from"./index-f1e8cfe7.js";const k=r('<button class="text-red-400"></button>',2),D=r('<span class="w-24">Saved: <!> </span>',3),z=r('<span class="ml-2">Uploaded: </span>',2),B=r('<p class="flex items-center text-gray-800"><span class="w-24">Saved: <!> </span><span class="ml-2">Uploaded: </span></p>',7),j=r('<section class="pb-bar pt-bar relative h-full space-y-2 overflow-y-auto bg-gray-200 px-2"><div class="pb-bar fixed inset-x-0 bottom-[4vh] mx-auto flex justify-center"></div></section>',4);function V(){const i=_(),[p,d]=C(!1),b=async()=>{const{value:e}=await E.confirm({title:"Delete Recordings",message:"Are you sure you want to delete all saved items? Note: Uploaded items will not be deleted, until the device is notified"});e&&(await i.deleteRecordings(),await i.deleteEvents({uploaded:!1}))};S(()=>{const e=u.get("/storage");e&&(u.set("/storage",[e[0],(()=>{const l=k.cloneNode(!0);return l.$$click=b,a(l,s(N,{size:32})),l})()]),console.log(u.get("/storage")))});const v=async()=>{d(!0);try{await i.uploadRecordings(),await i.uploadEvents(),d(!1)}catch{d(!1)}};return(()=>{const e=j.cloneNode(!0),l=e.firstChild;return a(e,s($,{icon:y,header:"Recordings",get action(){return s(m,{href:"recordings",class:"text-blue-500",get children(){return s(w,{size:32})}})},get children(){return s(m,{href:"recordings",class:"flex items-center text-gray-800",get children(){return[(()=>{const t=D.cloneNode(!0),n=t.firstChild,o=n.nextSibling;return o.nextSibling,a(t,()=>h().filter(({isUploaded:c})=>!c).length,o),t})(),(()=>{const t=z.cloneNode(!0);return t.firstChild,a(t,()=>h().filter(({isUploaded:n})=>n).length,null),t})()]}})}}),l),a(e,s($,{icon:U,header:"Events",get children(){const t=B.cloneNode(!0),n=t.firstChild,o=n.firstChild,c=o.nextSibling;c.nextSibling;const f=n.nextSibling;return f.firstChild,a(n,()=>x().filter(({isUploaded:g})=>!g).length,c),a(f,()=>x().filter(({isUploaded:g})=>g).length,null),t}}),l),a(l,s(A,{text:"Upload to Cacophony",loadingText:"Uploading...",onClick:v,get disabled(){return p()},get loading(){return p()}})),e})()}R(["click"]);export{V as default};
